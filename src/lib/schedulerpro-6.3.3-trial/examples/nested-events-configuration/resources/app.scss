:root {
    --station-color     : #888;
    --event-color       : #9a9a9a;
    --parent-background : #ddd;
    --parent-color      : #333;
}


.b-theme-classic-dark {
    --parent-background : #222;
    --parent-color      : #eee;
}


// Parent styling
.b-sch-event-wrap.b-nested-events-parent {
    // Gray backdrop, extending outside of the event
    &::before {
        content          : '';
        background-color : var(--parent-background);
        opacity          : 0.5;
        position         : absolute;
        top              : -5px;
        left             : -5px;
        right            : -5px;
        bottom           : -5px;
        border-radius    : 3px;
    }

    // Alter backdrop on hover
    &:hover::before {
        background-image : linear-gradient(#00000010, #00000010);
    }

    &:has(.b-sch-event-selected)::before {
        border : 1px solid #444;
    }

    > .b-sch-event:not(.b-milestone) {
        background-color : transparent;
        color            : var(--parent-color);

        // Don't alter event appearance on hover or selection
        &:hover,
        &.b-sch-event-selected,
        &.b-sch-event-selected:hover {
            background-image : none;

            > .b-sch-event-content,
            > .b-sch-event-content * {
                color : var(--parent-color);
            }
        }

        > .b-sch-event-content {
            width               : 80%;
            position            : static;
            margin-inline-start : 0.35em;
            align-self          : start;
        }

        > .b-task-percent-bar-outer {
            display : none;
        }
    }

    &.exceeded {
        &::before {
            border : 1px solid red;
        }

        > .b-sch-event > {
            .b-sch-event-content,
            .b-sch-event-content * {
                color : red !important;
            }
        }
    }

    .add-event,
    .warning {
        margin-inline-end : 0;
        position          : absolute;
        top               : 0;
        right             : 0.25em;
        opacity           : 0.7;
        transition        : opacity .2s;
        cursor            : pointer;

        .b-rtl & {
            left  : 0.25em;
            right : auto;
        }

        &:hover {
            opacity : 1;
        }
    }
}

// Used by both parents and nested events
.selection-indicator::before {
    content : '\f0c8';
    opacity : 0.7;

    .b-sch-event-selected > .b-sch-event-content > & {
        content : '\f14a';
    }
}

// Nested event styling
.b-nested-events-container {
    .b-nested-event > .b-sch-event,
    .b-sch-event-resizing .b-nested-event > .b-sch-event {
        // Create some space between nested events horizontally
        width              : calc(100% - 6px);
        inset-inline-start : 3px;
    }
}

.b-nested-event > .b-sch-event {
    background-color : currentColor;
    border-radius    : 3px;

    .b-sch-event-content {
        color : #fff;
    }

    .b-fa-biohazard {
        margin-inline-start : 0.5em;
    }
}

.b-dragging-event .b-nested-events-parent .b-sch-event:hover .b-nested-events-container {
    background-image : none;
}

.b-grid-cell[data-column=name] {
    display               : grid;
    grid-template-columns : 3em 1fr;
    gap                   : 0.5em;
    align-content         : center;

    i {
        grid-row         : 1 / 3;
        font-size        : 1.5em;
        min-width        : 2em;
        height           : 2em;
        border-radius    : 50%;
        display          : flex;
        align-items      : center;
        justify-content  : center;
        background-color : var(--station-color);
        color            : #fff;
    }

    .name {
        font-weight : bold;
    }
}
