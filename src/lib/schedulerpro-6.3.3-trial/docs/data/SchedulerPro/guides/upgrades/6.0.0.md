# Upgrade guide for Scheduler Pro v6.0.0

## Adjusting your data structure for Calendar editor support

This release introduces the calendar editor - a special widget allowing to edit calendar data.
Implementing the widget required a few changes on the data level.
The [CalendarIntervalModel](#SchedulerPro/model/CalendarIntervalModel) model has got two new fields:

- [type](#SchedulerPro/model/CalendarIntervalModel#field-type) - a string field with two possible values: `Week` and
  `Exception`.
- [availability](#SchedulerPro/model/CalendarIntervalModel#field-availability) - a store of the interval availability
  ranges.
- [compositeCode](#SchedulerPro/model/CalendarIntervalModel#field-compositeCode) - a string field
  helping the calendar editor to identify cases when multiple intervals should be represented as a singe interval in UI
  (happens when configuring weeks).

Please add corresponding fields to your database structure if you plan to use the calendar editor.

## Checking your data for Calendar editor support

For recurring calendar intervals we use the Later JS library under the hood. Its syntax is quite rich which is good.
But the downside is it's tricky to cover all its possible configurations in the UI. Thus the calendar editor at the moment
supports only the most common cases used by the calendars.

You can check if the new editor supports your data by calling the `calendarManagerStore`
 [validateAllRecordsForCalendarEditor](#SchedulerPro/data/CalendarManagerStore#function-validateAllRecordsForCalendarEditor)
method after the data is loaded:

```javascript
calendarManagerStore.validateAllRecordsForCalendarEditor();
```

That will report found errors to the browser console. If nothing is reported the data is good.

For instance the calendar editor data does not support so called composite schedules (rules looking like
`{rule1} and {rule2}` or `{rule1} except {rule2}`).
Let's say we have a "Working hours" calendar with the following unsupported rules:

```json
{
    "recurrentStartDate" : "at 8:00 except on Saturday and Sunday",
    "recurrentEndDate"   : "at 17:00 except on Saturday and Sunday",
    "isWorking"          : true
},
```

So if we trigger calendars validation:

```javascript
// validate all calendars in the store
calendarManagerStore.validateAllRecordsForCalendarEditor();
```

That will dump a warning in the browser console:

```text
  CalendarEditorStore: The "Working hours" calendar interval cannot be handled. Please copy its data and
  report to  https://bryntum.com/forum :
{
  "id": "_generatedModelClass_9ce06c8d-df47-4d4d-921b-3b51fd806e98",
  "recurrentStartDate": "at 8:00 except on Saturday and Sunday",
  "recurrentEndDate": "at 17:00 except on Saturday and Sunday",
  "isWorking": true,
  "availability": null
}
```

In that exact case the rules can be easily changed to a non-composite look:

```json
{
    "recurrentStartDate" : "every weekday at 8:00",
    "recurrentEndDate"   : "every weekday at 17:00",
    "isWorking"          : true
}
```

And other similar "composite cases" could require breaking an interval into multiple ones with simple rules.
Or you could just try making them manually with the calendar editor.

As always if you face a case you cannot implement report us: [https://bryntum.com/forum](https://bryntum.com/forum)

## `BryntumProjectModel` framework wrapper replaced

`BryntumProjectModel` framework wrapper was deprecated in v5.6.0 and is now removed.
Use `BryntumSchedulerProProjectModel` instead.

### Angular

**app.component.ts:**

```typescript
import { BryntumSchedulerProProjectModelComponent } from '@bryntum/schedulerpro-angular';
```

**app.component.html:**

```html
<bryntum-schedulerpro-project-model
   #project
   // Project properties
/>
```

### React

**App.tsx:**

```typescript
import { BryntumSchedulerProProjectModelComponent } from '@bryntum/schedulerpro-react';

...

function App() {
    return (
        <>
            <BryntumSchedulerProProjectModel
                ref={project}
                // Project properties
            />
        </>
    );
}
```

### Vue

**App.vue:**

```javascript
<template>
    <bryntum-schedulerpro-project-model
        ref="project"
        // Project properties
    />
</template>

<script>
    import { BryntumSchedulerProProjectModel } from '@bryntum/schedulerpro-vue-3';

    export default {
        components : {
            BryntumSchedulerProProjectModel
        }
    };
</script>
```

## Removed eventBodyTemplate

With this release we removed the `eventBodyTemplate` function, which was deprecated in v5.6.2. It was originally ported
over from our older line of products to ease migration, but it is redundant since an `eventRenderer` can accomplish the
same result. By removing it we have simplified the codebase, and reduced confusion on where to put event bar
customization code.

**Old code:**

```javascript
const scheduler = new SchedulerPro({
    eventBodyTemplate : data => StringHelper.xss`
        <div class="b-sch-event-header">${data.headerText}</div>
        <div class="b-sch-event-footer">${data.footerText}</div>
    `,

    eventRenderer({ eventRecord, resourceRecord, renderData }) {
        return {
            headerText : DateHelper.format(eventRecord.startDate, 'HH:mm'),
            footerText : StringHelper.encodeHtml(eventRecord.name || '')
        };
    }
});
```

**New code:**

```javascript
const scheduler = new SchedulerPro({
    eventRenderer({ eventRecord, resourceRecord, renderData }) {
        return `
            <div class="b-sch-event-header">${DateHelper.format(eventRecord.startDate, 'HH:mm')}</div>
            <div class="b-sch-event-footer">${StringHelper.encodeHtml(eventRecord.name || '')}</div>
        `;
    }
});
```

Or more efficiently using DomConfigs:

```javascript
const scheduler = new SchedulerPro({
    eventRenderer({ eventRecord, resourceRecord, renderData }) {
        return [
            {
                class : 'b-sch-event-header',
                text  : DateHelper.format(eventRecord.startDate, 'HH:mm')
            },
            {
                class : 'b-sch-event-footer',
                text  : eventRecord.name || ''
            }
        ];
    }
});
```

Note that in some edge cases the new appearance might not be identical to the old. For example if your dataset has icons
on the events, but your `eventBodyTemplate` did not render them, they might now be unexpectedly shown. Please review
your UI after upgrading to ensure it looks as expected.

## New location for `Core.util.helper.Point` class

The `Core.util.helper.Point` class was moved in v5.6.0 to solve circular module dependencies. It is now a named
(`Point`) export of the `Core.util.helper.Rectangle` module.

Changes are required if you are directly importing the class from sources:

**Old code:**

```javascript
import Point from 'path-to-lib/Core/helper/util/Point.js';
```

**New code:**

```javascript
import { Point } from 'path-to-lib/Core/helper/util/Rectangle.js';
```

Note: No changes required for importing from module or umd bundles.

## Restructured features

Internal development made it necessary to in v5.5.0 define two features specifically for Scheduler Pro and one for
Scheduler:

- `Grid.feature.RowReorder` -> `Scheduler.feature.RowReorder`
- `Grid.feature.CellEdit` -> `SchedulerPro.feature.CellEdit`
- `Scheduler.feature.Dependencies` -> `SchedulerPro.feature.Dependencies`

If you extended those features to add some custom logic or imported feature directly from source, you need change base
classes to the new ones and use correct import path.

## Angular View Engine wrappers for Angular 11 and older versions

In v5.3.3 a new `@bryntum/schedulerpro-angular-view` package designed to work with Angular 11 and older versions was added,
which use the View Engine for rendering. If you are using one of the legacy Angular versions, please follow these
steps to use the package:

Install the package using npm:

```shell
npm install @bryntum/schedulerpro-angular-view@6.0.0
```

Import the component in your Angular application:

```typescript
import { BryntumSchedulerProComponent } from '@bryntum/schedulerpro-angular-view';
```

Do not forget to remove previously used `@bryntum/schedulerPro-angular` package which requires Angular 12 or newer
version.

Please check [Angular integration guide](#SchedulerPro/guides/integration/angular/guide.md#ivy-and-view-engine-wrappers)
for additional information.

## Localization update
## Localization update

`LocaleManager.registerLocale` was deprecated in v5.3.0 and has now been removed.
[LocaleHelper.publishLocale](#Core/localization/LocaleHelper#function-publishLocale-static) should be used instead.

**Old code:**

```javascript
LocaleManager.registerLocale('Es', {
    desc : 'Spanish', locale : {
        localeName : 'Es',
        localeDesc : 'Spanish',
        locale     : {
            /* localization */
        }
    }
});
```

**New code:**

```javascript
LocaleHelper.publishLocale({
    localeName : 'Es',
    localeDesc : 'Spanish',
    localeCode : 'es',
    /* localization */
});
```

`LocaleManager.extendLocale` was deprecated in v5.3.0 and has now been removed.
[LocaleManager.applyLocale](#Core/localization/LocaleManager#function-applyLocale) should be used instead.

**Old code:**

```javascript
LocaleManager.extendLocale('Es', {
    desc : 'Spanish', locale : {
        locale : {
            /* localization */
        }
    }
});
```

**New code:**

```javascript
LocaleManager.applyLocale({
    localeName : 'Es',
    localeDesc : 'Spanish',
    localeCode : 'es',
    /* localization */
});
```

Check our [localization guide](#SchedulerPro/guides/customization/localization.md#locales) for the details.

## New effort field in task editor

Task editor got a new `Effort` field on the `Ganeral` tab in v5.3.0. If you don't need it, it can be removed like this:

```javascript
const scheduler = new SchedulerPro({
    features : {
        taskEdit : {
            items : {
                generalTab : {
                    items : {
                        // get rid of effort field
                        effortField : false
                    }
                }
            }
        }
    },
    ...
})
```

## New module bundle for Angular

Bryntum Scheduler Pro is since v5.1.0 delivered with a new ES Module bundle without WebComponents. This was done to
avoid conflicts with Angular which also uses WebComponents for applications.

Angular wrappers use `schedulerpro.module.js` bundle in favor of removed `schedulerpro.lite.umd.js` one.

Your Angular applications should be upgraded to use the new `schedulerpro.module.js` bundle which is set as `main` for
`@bryntum/schedulerpro` NPM package.

Replace all application imports from Bryntum packages as shown below:

**Old code:**

```javascript
import { SchedulerPro } from '@bryntum/schedulerpro/schedulerpro.lite.umd.js';
```

**New code:**

```javascript
import { SchedulerPro } from '@bryntum/schedulerpro';
```

## New module bundle with WebComponents

Bryntum Scheduler Pro is since v5.1.0 delivered with a new `schedulerpro.wc.module.js` ES Module bundle with
WebComponents.

Your applications which use WebComponents and modules bundle should be upgraded to import from new
`schedulerpro.wc.module.js` instead of `schedulerpro.module.js`.

## New keyboard shortcuts functionality

[KeyMap](#Core/widget/mixin/KeyMap) is a mixin that allows for standardized and customizable keyboard shortcuts
functionality. KeyMap is mixed in to Widget by default and therefore available to all Widget child classes. There is a
new [guide](#Grid/guides/customization/keymap.md) describing how to customize currently integrated keyboard shortcuts.

# Upgrade guide for Scheduler Pro v5.0.4

## EventCopyPaste enabled by default
The `EventCopyPaste` feature was enabled by default in Scheduler Pro v5.0.4. If that has some negative effect on your
application you can turn it off:

```javascript
const scheduler = new SchedulerPro({
    features : {
        eventCopyPaste : false
    }
});
```

## Validating backend responses by default

The `validateResponse` flag on ProjectModel was changed v5.0.3 to default to `true`. When enabled, it validates
responses from the backend and outputs a message on console if the format isn't valid. This is helpful during the
development phase, but can be turned off in production:

```javascript
const scheduler = new SchedulerPro({
   project : {
       // Turn response validation off
       validateResponse : false,
       ...
   }
});
```

## New Vue wrapper config option `relayStoreEvents`

This option was introduced in v5.0.3 to allow relaying of store events to the Scheduler Pro instance. It defaults to
`false` (no events relayed) which changes the default behavior so if your application relies on relayed events,
configure it as `true`.

Example:

```html
<bryntum-scheduler-pro
    :relayStoreEvents="true"
>
```

The config option applies to both Vue 2 and Vue 3.

## ScaleColumn removed

It was previously moved to Scheduler, but a proxy was kept in Scheduler Pro for compatibility. This proxy has now been
removed. If you were importing it directly from our sources, you need to update your import url:

**Old code:**

```javascript
import ScaleColumn from 'lib/SchedulerPro/column/ScaleColumn.js';
```

**New code:**

```javascript
import ScaleColumn from 'lib/Scheduler/column/ScaleColumn.js';
```

## Store now defaults to use raw data for remotely loaded data

The `useRawData` setting on `Store` is now enabled by default when data is loaded remotely using an `AjaxStore` or a
`CrudManager` (the `ProjectModel`), but with all sub-settings disabled. This will boost load performance slightly, by
not cloning the incoming data objects.

If you want to restore the previous behavior, you can set `useRawData : false` on the store:

```javascript
const scheduler = new SchedulerPro({
    project : {
        eventStore : {
            useRawData : false
        }
    }
});
```

Or for all project stores:

```javascript
const scheduler = new SchedulerPro({
    project : {
        useRawData : false
    }
});
```

## Manually scheduled events no longer extend over non-working time

The default value for `ProjectModel.skipNonWorkingTimeInDurationWhenSchedulingManually` is now `false`. If you want
manually scheduled events to extend their duration when intersecting non-working time, you have to configure it as
`true`:

```javascript
const scheduler = new SchedulerPro({
    project : {
        skipNonWorkingTimeInDurationWhenSchedulingManually : true
    }
});
```

## Removed fetchOptions and requestConfig from ProjectModel.transport

The previously (in v5.0.0) deprecated `fetchOptions` and `requestConfig` properties of `ProjectModel.transport.load` and
`ProjectModel.transport.sync` were removed in v6.0.0. Any settings passed in those properties can instead be passed
directly on the upper level (in the `load` or `sync` configuration objects).

**Old code:**

```javascript
const scheduler = new SchedulerPro({
    project : {
        transport : {
            load : {
                fetchOptions : {
                    credentials : 'include'
                }
            }
        }
    }
});
```

**New code:**

```javascript
const scheduler = new SchedulerPro({
    project : {
        transport : {
            load : {
                credentials : 'include'
            }
        }
    }
});
```


<p class="last-modified">Last modified on 2025-10-06 7:35:02</p>