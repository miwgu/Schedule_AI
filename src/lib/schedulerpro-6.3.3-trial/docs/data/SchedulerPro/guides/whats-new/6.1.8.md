# What's new in SchedulerPro v6.1.8

## `rtl` config of `Widget`
The `rtl` config property of Widgets is now public. By default Widgets conform to the writing direction of the element
they are rendered to. But with the now public `rtl` property, you can force a widget, and all descendant widgets to lay
out from right to left.

## Duration and lag conversion hooks

This release introduces new public methods allowing to override duration units conversion easier.

Event model has got a couple of new methods:

* [convertDurationGen](#SchedulerPro/model/EventModel#function-convertDurationGen) method that basically converts the
provided duration value from one time unit to another. The method has to be a generator to embed into the rest of
the Engine code.
* [canConvertDuration](#SchedulerPro/model/EventModel#function-canConvertDuration) method that indicates whether
the event can perform the requested duration conversion. The method is used when requesting a conversion in
a synchronous way and since the data is loaded asynchronously there could be cases when a conversion is not possible yet.
By default the method checks that the project has loaded the rates needed for conversion.

And dependency model has got new [convertLagGen](#SchedulerPro/model/DependencyModel#function-convertLagGen) method
responsible for converting the dependency lag. Our codebase has no code triggering lag conversion from a synchronous
context. So we haven't added `canConvertLag` similar to mentioned `canConvertDuration`.

### Usage example

In the old version of the Gantt made for Ext JS each calendar keeps own conversion rates. The approach was quite
controversial and caused a lot of questions. So it was decided to change that in the new scheduling Engine. But if you migrate from
the old version and want to stick to that approach you can use the following code:

```javascript
// Make calendars capable of converting durations.
// This will add "hoursPerDay", "daysPerWeek" and "daysPerMonth" fields to MyCalendarModel model
class MyCalendarModel extends DurationConverterMixin.derive(CalendarModel) {}

class MyDependencyModel extends DependencyModel {

    * convertLagGen(duration, fromUnit, toUnit) {
        // use the dependency calendar as lag converter
        const converter = yield this.$.calendar;

        return yield* converter.$convertDuration(duration, fromUnit, toUnit);
    }

}

class MyEventModel extends EventModel {

    * convertDurationGen(duration, fromUnit, toUnit) {
        // use the event calendar as duration converter
        const converter = yield this.$.effectiveCalendar;

        return yield* converter.$convertDuration(duration, fromUnit, toUnit);
    }

    // Override to check that the event calendar is ready for converting
    canConvertDuration(duration, fromUnit, toUnit) {
        // sanitize provided units ("d", "days" -> "day", "ms" -> "millisecond" etc)
        toUnit   = DateHelper.normalizeUnit(toUnit);
        fromUnit = DateHelper.normalizeUnit(fromUnit);

        const calendar = this.effectiveCalendar;

        // can convert duration if its numeric and
        return typeof duration === 'number' &&
            // the event calendar is resolved and has needed conversion rates
            calendar?.unitsInMs?.[ fromUnit ] && calendar.unitsInMs[ toUnit ];
    }
}

new SchedulerPro({
    project : {
        // tell the project to use own customized models
        calendarModelClass   : MyCalendarModel,
        eventModelClass      : MyEventModel,
        dependencyModelClass : MyDependencyModel,
        ...
    },
    ...
})
```


<p class="last-modified">Last modified on 2025-10-06 7:35:02</p>